group "se.signatureservice.configuration"

apply plugin: "java-library"
apply plugin: "certificateservices.remotesign.gradle"

pluginManager.withPlugin('org.certificateservices.gradle.certservice-gradle-plugin') {
    certserviceSettings {
        signjar = true
        signjarFolder = "/tmp"
        useMavenCentral = true
        licenseName = "GNU Lesser General Public License v3.0 or later"
        licenseURL = "https://www.gnu.org/licenses/lgpl-3.0-standalone.html"
        useDeveloperPOM = true
        useScmPOM = true
        scmConnection = "https://github.com/CGI-SE-Trusted-Services/signservice-java-configuration.git"
        scmDeveloperConnection = "https://github.com/CGI-SE-Trusted-Services/signservice-java-configuration.git"
        scmUrl = "https://github.com/CGI-SE-Trusted-Services/signservice-java-configuration"
        projectUrl = "https://github.com/CGI-SE-Trusted-Services/signservice-java-configuration"
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation "org.bouncycastle:bcmail-jdk15on:1.70"
    implementation "com.fasterxml.jackson.core:jackson-databind:2.14.0"
    implementation "org.yaml:snakeyaml:1.33"
    implementation "org.slf4j:slf4j-api:2.0.3"
}

test {
    useJUnitPlatform()
}

publishing{
    repositories{
        maven {
            name 'mavenCentral'
            url (project.version =~ "SNAPSHOT"? "https://s01.oss.sonatype.org/content/repositories/snapshots/" : 'https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/')
            credentials {
                username = getGradleProperty("repository.sonatype.username")
                password = getGradleProperty("repository.sonatype.password")
            }
        }
    }
}
